

Сам себе Гутенберг. Делаем многоязычные параллельные книги / Habr


              2  June  2021 at 19:05  Сам себе Гутенберг. Делаем многоязычные параллельные книги Python *Typography *Machine learning *Learning languages Natural Language Processing * 
        Tutorial
           
В прошлый раз мы с вами научились делать параллельные книги и сделали русско-английский вариант отрывка романа Харпер Ли "Убить пересмешника". Сегодня мы сделаем следующий шаг и создадим полноценную многоязычную книгу на восьми языках.
Напомню, что целью этого проекта является создание инструмента, который поможет людям, изучающим и преподающим иностранные языки, создавать учебные материалы и параллельные книги для улучшения навыков чтения. Глобальная проблема состоит в том, что трудно найти интересный для изучения материал с параллельным переводом, тогда как найти книгу в оригинале и ее русскую редакцию по отдельности гораздо проще. 
Семь книг
Проделаем все на примере романа Булгакова "Мастер и Маргарита", потому что он очень популярен в мире и был переведен на множество языков. Я нашел его версии на английском и немецком (германские языки); белорусском, чешском и украинском (славянские языки); а также на венгерском и китайском языках. Все семь текстов мы выровняем с русским оригиналом, получим семь книг. Затем выровняем их между собой и получим возможность выбирать любые комбинации языков для своей книги в любом порядке. Полные версии книг можно будет скачать в формате pdf в конце статьи.
Начнем с пары венгерский-русский.

Шаг 1. Подготовка текстов
Кратко напомню основные правила подготовки текстов (подробнее смотрите в первой статье, ссылку найдете ниже). 
Правила

Удалить заведомо лишние строки (информацию об издателе, посвящение, номера страниц, примечания).
Проставить метки для автора и названия.
Проставить метки для заголовков (H1 самый большой, H5 самый маленький), количество заголовков в текстах должно быть одинаковым.
Убедиться, что в тексте нет строк, которые кончаются точкой и при этом не являются концом абзаца (иначе целый абзац разобьется в этом месте на два).

Четвертое правило можно соблюсти для одного текста, так как при создании книги можно будет выбрать на основе какого из них брать информацию о разбиении на абзацы. В нашем случае возьмем русский, потому что мы будем выравнивать все остальные тексты к нему. К тому же для найденного мной оригинального текста это правило уже соблюдено.
Метки
Язык разметки представляет из себя набор меток, которые ставятся в конце предложения:



Метка
Значение
Установка




%%%%%title.
Название произведения
Вручную


%%%%%author.
Автор
Вручную


%%%%%h1. %%%%%h2. %%%%%h3. %%%%%h4. %%%%%h5.
Заголовки
Вручную


%%%%%divider.
Разделитель
Вручную


%%%%%.
Новый абзац
Автоматически



Благодаря меткам мы извлечем из сырого текста данные о названии произведения, его авторе, названии и местонахождении глав. Это понадобится нам при создании книги.
Текст
В результате должны получиться тексты, похожие на следующие:
Мастер и Маргарита%%%%%title.
М.А. Булгаков%%%%%author.
ЧАСТЬ ПЕРВАЯ%%%%%h1.
Глава 1%%%%%h2.
Никогда не разговаривайте с неизвестными%%%%%h2.
Однажды весною, в час небывало жаркого заката, в Москве, на Патриарших прудах, появились два гражданина. Первый из них, одетый в летнюю серенькую пару, был маленького роста, упитан, лыс, свою приличную шляпу пирожком нес в руке, а на хорошо выбритом лице его помещались сверхъестественных размеров очки в черной роговой оправе. Второй – плечистый, рыжеватый, вихрастый молодой человек в заломленной на затылок клетчатой кепке – был в ковбойке, жеваных белых брюках и в черных тапочках.   
...

MIHAIL BULGAKOV%%%%%author.
A MESTER 